{% macro pagination(current_page, total_pages, base_url, query_params={}) -%}
{% if total_pages > 1 %}
<nav aria-label="Pagination Navigation" class="flex justify-center mt-8">
    <div class="flex items-center space-x-2">
        <!-- Previous Button -->
        {% if current_page > 1 %}
        <a href="{{ base_url }}?page={{ current_page - 1 }}{% for key, value in query_params.items() %}&{{ key }}={{ value }}{% endfor %}" 
           class="px-3 py-2 bg-metal-gray hover:bg-gray-700 text-metal-silver rounded-lg transition border border-metal-silver/20"
           aria-label="Go to previous page">
            <svg class="h-5 w-5" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
        </a>
        {% else %}
        <span class="px-3 py-2 bg-metal-gray/50 text-metal-silver/50 rounded-lg border border-metal-silver/10 cursor-not-allowed">
            <svg class="h-5 w-5" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
            </svg>
        </span>
        {% endif %}
        
        <!-- Page Numbers -->
        <div class="flex items-center space-x-1">
            {% set start_page = current_page - 2 if current_page - 2 > 1 else 1 %}
            {% set end_page = current_page + 2 if current_page + 2 < total_pages else total_pages %}
            
            {% if start_page > 1 %}
                <a href="{{ base_url }}?page=1{% for key, value in query_params.items() %}&{{ key }}={{ value }}{% endfor %}" 
                   class="px-3 py-2 hover:bg-metal-gray hover:text-metal-gold rounded-lg transition">
                    1
                </a>
                {% if start_page > 2 %}
                    <span class="px-2 text-metal-silver/50">...</span>
                {% endif %}
            {% endif %}
            
            {% for page in range(start_page, end_page + 1) %}
                {% if page == current_page %}
                    <span class="px-3 py-2 bg-metal-gold text-black font-semibold rounded-lg" aria-current="page">
                        {{ page }}
                    </span>
                {% else %}
                    <a href="{{ base_url }}?page={{ page }}{% for key, value in query_params.items() %}&{{ key }}={{ value }}{% endfor %}" 
                       class="px-3 py-2 hover:bg-metal-gray hover:text-metal-gold rounded-lg transition">
                        {{ page }}
                    </a>
                {% endif %}
            {% endfor %}
            
            {% if end_page < total_pages %}
                {% if end_page < total_pages - 1 %}
                    <span class="px-2 text-metal-silver/50">...</span>
                {% endif %}
                <a href="{{ base_url }}?page={{ total_pages }}{% for key, value in query_params.items() %}&{{ key }}={{ value }}{% endfor %}" 
                   class="px-3 py-2 hover:bg-metal-gray hover:text-metal-gold rounded-lg transition">
                    {{ total_pages }}
                </a>
            {% endif %}
        </div>
        
        <!-- Next Button -->
        {% if current_page < total_pages %}
        <a href="{{ base_url }}?page={{ current_page + 1 }}{% for key, value in query_params.items() %}&{{ key }}={{ value }}{% endfor %}" 
           class="px-3 py-2 bg-metal-gray hover:bg-gray-700 text-metal-silver rounded-lg transition border border-metal-silver/20"
           aria-label="Go to next page">
            <svg class="h-5 w-5" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
        </a>
        {% else %}
        <span class="px-3 py-2 bg-metal-gray/50 text-metal-silver/50 rounded-lg border border-metal-silver/10 cursor-not-allowed">
            <svg class="h-5 w-5" fill="none" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
        </span>
        {% endif %}
    </div>
</nav>

<!-- Page Info -->
<div class="text-center mt-4 text-sm text-metal-silver/60">
    Page {{ current_page }} of {{ total_pages }}
</div>
{% endif %}
{%- endmacro %}